<?php require_once"beta.php";require_once"special.php";$tests[]='light_test_index_php';function light_test_index_php(){$Mbs=substr(DIR_SYSTEM,0,-7)."index.php";$Mkb="extension/lightning/gamma.php";$Mdt=file_get_contents($Mbs);$should=false;$bad=!strpos($Mdt,$Mkb);if($bad){$Maf=strpos($Mdt,"index.php");$Maf=strpos($Mdt,"}",$Maf+1);if($Maf){$Maf++;$should=substr($Mdt,0,$Maf)."\n\n<font color='red'>if (file_exists(".'$'."li"." = DIR_APPLICATION.'/controller/extension/lightning/gamma.php')) require_once(".'$'."li"."); //Lightning</font>".substr($Mdt,$Maf);$should=str_replace("<?","&lt;?",$should);}}return Wb('index_php',$bad,$should);}$tests[]='light_test_robots_txt';function light_test_robots_txt(){$Mtq=substr(DIR_SYSTEM,0,-7)."robots.txt";$Mdt='';if(file_exists($Mtq))$Mdt=file_get_contents($Mtq);$Mkb="Disallow: /*li_op=";return Wb('robots_txt',!strpos($Mdt,$Mkb),file_exists($Mtq));}$tests[]='light_test_https';function light_test_https(){$Mlm=false;if(light_get_setting("config_secure")){if(!strpos(HTTP_SERVER,"ttps:")or!strpos(HTTPS_SERVER,"ttps:"))$Mlm=true;}return Wb("https",$Mlm,array("http"=>HTTP_SERVER,"https"=>HTTPS_SERVER));}$tests[]='light_test_cron';function light_test_cron(){$cron=false;if(file_exists(DIR_CACHE."lightning/"."cron_working"))$cron=@filemtime(DIR_CACHE."lightning/"."cron_working")>time()-15*60;$Map=getcwd()."/catalog/controller/extension/lightning/cron.php";return Wb("cron",!$cron,array("line"=>PHP_BINDIR."/php -f ".$Map));}$tests[]='light_test_image_optimization';function light_test_image_optimization(){$Mtu=DIR_IMAGE."catalog/lightning_optimized_data";if(file_exists($Mtu)&&filemtime($Mtu)>time()-60*30)return Wb('image_optimization',false);$Map=getcwd()."/catalog/controller/extension/lightning/lio";if(file_exists($Map)&&(fileperms($Map)&0777)!==0777){@chmod(getcwd()."/catalog/controller/extension/lightning",0755);@chmod($Map,0777);clearstatcache();if((fileperms($Map)&0777)!==0777)$Mbq["chmod"]=$Map;}$Mbq["cron"]=$Map;require_once"optima.php";if(!optimizers_ready()){if(defined("HTTP_CATALOG"))$Mbq["link"]=HTTP_CATALOG;else$Mbq["link"]=HTTP_SERVER;$Mbq["link"].="index.php?li_op=t&op=image_check";}return Wb('image_optimization',true,$Mbq);}$tests[]='light_test_php7';function light_test_php7(){return Wb('php7',phpversion()<7);}$tests[]='light_test_php_acceleration';function light_test_php_acceleration(){$opcache=(extension_loaded('apc')&&ini_get('apc.enabled'))||(extension_loaded('apcu')&&ini_get('apc.enabled'))||((extension_loaded('opcache')or extension_loaded('Zend OPcache'))&&ini_get('opcache.enable'))||(extension_loaded('eaccelerator')&&ini_get('eaccelerator.enable'))||(extension_loaded("xcache"));return Wb('php_acceleration',!$opcache,phpversion());}function light_get_setting($Maz){global$db;if(!$db){require_once"beta.php";$db=Ws();}$Mlm=$db->query("SELECT value FROM ".DB_PREFIX."setting WHERE `key`='$Maz' AND store_id=0")->row;if(!$Mlm)return false;return$Mlm["value"];}function Wdy(){global$tests;foreach($tests as$Mfz)$Mfz();Wdw();}function Wc($Mld){$Mji="light_test_".$Mld;if(!function_exists($Mji))return true;return!$Mji();}