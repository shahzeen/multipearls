<?php if(!empty($Mow))return;$Mow=true;$Mz=false;$Mve=false;if(substr($_SERVER["REQUEST_URI"],-10)=="?lightning"){$Mve=true;require"zero.php";exit;}register_shutdown_function('Web');if(!empty($_SERVER["HTTP_X_REAL_HOST"]))$_SERVER["HTTP_HOST"]=$_SERVER["HTTP_X_REAL_HOST"];$Mu=isset($_SERVER["HTTP_USER_AGENT"])&&preg_match("/bot|crawl|slurp|spider/i",$_SERVER["HTTP_USER_AGENT"]);if(!empty($_GET["li_op"])){$Mz=$_GET["li_op"];if($Mz=="cn"){require_once"special.php";Wgl();}if($Mz=="lg")if(empty($_COOKIE["lix"]))require_once"zero.php";else{require_once"special.php";Wes();}}define('Wdr',@$_SERVER["HTTP_USER_AGENT"]=="Lightning CRON Job");if(strpos($_SERVER["REQUEST_URI"],"=api/")||empty($_SERVER["REQUEST_METHOD"]))return;$Mgf=DIR_LOGS.'cv';if(!Wdr and$Mz){header("X-Robots-Tag: none",true);if($Mz[0]=="t"){$Mnw=true;require_once"tetha.php";}if($Mz=="by"){@unlink($Mgf);@unlink(DIR_CACHE."lightning/".'b');require_once"zero.php";}if($Mz=="n")require_once"zero.php";}$Mgy=microtime(true);$Moj=DIR_CACHE."lightning/".'dg';define("LIGHT_FRONTEND",true);if($Mam=isset($_GET["li_sql"])){$_SERVER["REQUEST_URI"]=str_replace("?li_sql=1","",$_SERVER["REQUEST_URI"]);$_SERVER["REQUEST_URI"]=str_replace("&li_sql=1","",$_SERVER["REQUEST_URI"]);unset($_GET["li_sql"]);unset($_REQUEST["li_sql"]);require_once"beta.php";require_once"special.php";}if($Mz=="gens"&&$_GET["cd"]>10000000&&file_exists($Mgf)){unlink($Mgf);Wt(true);}else if(file_exists($Mgf)and empty($_COOKIE['az'])){$Mhb=file_get_contents($Mgf);if((!strpos($Mhb,"comm")&&filemtime($Mgf)>time()-7200)or (filemtime($Mgf)>time()-10*60)or ($Mhb=='dd')){if($Mz)die("false");Wf();return;}unlink($Mgf);}define("LIGHT_ENABLED",true);require_once"zero.php";function Wf($Mox=false){global$Mz;if($Mz or!empty($_SERVER["HTTP_X_REQUESTED_WITH"])or(!empty($_SERVER["HTTP_ACCEPT"])&&substr($_SERVER["HTTP_ACCEPT"],0,5)=="image")or(!empty($_POST))or!empty($_COOKIE['az'])or(@$_SERVER["HTTP_USER_AGENT"]=="Lightning CRON Job"))return;global$Moj;if(file_exists($Moj)){if(filemtime($Moj)<time()-15)return;}global$Moy,$Mgy;$Moy=rand(0,10000000);$Mbm['id']=$Moy;$Mbm['Mbt']=$Mgy;if(!empty($_SERVER["REMOTE_ADDR"]))$Mbm['ip']=$_SERVER["REMOTE_ADDR"];if(!empty($_SERVER["HTTP_USER_AGENT"]))$Mbm['Mon']=$_SERVER["HTTP_USER_AGENT"];if($Mox)$Mbm['Mox']=$Mox;$Mbm['Mbe']="http".(($_SERVER["SERVER_PORT"]==443)?"s://":"://").$_SERVER["HTTP_HOST"].$_SERVER["REQUEST_URI"];file_put_contents($Moj,serialize($Mbm)."\n",FILE_APPEND);}function Web(){$Moz=false;$Mo_=error_get_last();if(strpos($Mo_["message"],"annot declare class"))$Mo_=false;if(strpos($Mo_["message"],"annot redeclare class"))$Mo_=false;if(strpos($Mo_["message"],"server has gone away"))$Mo_=false;if($Mo_&&$Mo_["type"]!=8192&&$Mo_["type"]!=16384){$Moz=str_replace("\n","<br/>",$Mo_["message"])." in ".str_replace(substr(DIR_SYSTEM,0,-7),'',$Mo_["file"]);$Moz=str_replace(substr(DIR_SYSTEM,0,-7),'',$Moz);if($Mo_["line"])$Moz.=":".$Mo_["line"];require_once"special.php";if($Mo_["type"]!=2&&$Mo_["type"]!=8&&!strpos($Mo_["message"],"trtotime"))Wb("php_error",true,array("error"=>$Moz,"url"=>true,"lightning_disabled"=>!defined("LIGHT_ENABLED")));}global$Moj,$Moy;if($Moy){if(!$Moz){global$Mj;if($Mj)$Moz='+'.$Mj;}file_put_contents($Moj,$Moy.'|'.microtime(true).'|'.$Moz."\n",FILE_APPEND);}}function Wt($Mdl=false){static$Mlr;if($Mlr or!empty($_COOKIE['az']))return;global$Mam,$Mz;if($Mam and function_exists('Wck')){Wck();if(!$Mdl)$Mlr=true;return true;}if(!empty($_SERVER["HTTP_X_REQUESTED_WITH"])and!$Mdl)return;if(!empty($_SERVER["HTTP_ACCEPT"])&&substr($_SERVER["HTTP_ACCEPT"],0,5)=="image")return;if($Mz)return;global$Mgy,$Mgf;$Mpa=!file_exists($Mgf);$Mpb=microtime(true)-$Mgy;$Map=DIR_CACHE."lightning/".'de';if(file_exists($Map))$Mod=unserialize(file_get_contents($Map));else $Mod=array('do'=>0,'dp'=>0,'dm'=>0,'dn'=>0,'Moe'=>0);if($Mdl){if($Mpa){$Mod['dp']=0;$Mod['do']=0;}else{$Mod['dn']=0;$Mod['dm']=0;}}else{$Mod['Moe']=$Mpb;if($Mpa){if(empty($Mod['dp']))$Mod['dp']=0;if(empty($Mod['do']))$Mod['do']=0;$Mod['dp']+=$Mpb;$Mod['do']++;}else{if(empty($Mod['dn']))$Mod['dn']=0;if(empty($Mod['dm']))$Mod['dm']=0;$Mod['dn']+=$Mpb;$Mod['dm']++;}}if(!file_exists(DIR_CACHE."lightning"))mkdir(DIR_CACHE."lightning");file_put_contents($Map,serialize($Mod));if(!$Mdl)$Mlr=true;return;}